<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Fuyao-Jiang"><meta name="description" content="区块链开发、golang、智能合约、共识算法、密码学、Bitcoin、Ethereum、Bitshare源码解析、超级账本"><link rel="alternative" href="/atom.xml" title="姜富耀 | BlockChain" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>区块链开发 Solidity智能合约:类型,固定大小字节数组,动态字节数组 - 姜富耀 | BlockChain</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">姜富耀 | BlockChain</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">☯ DIR'/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-02-18T01:43:53.000Z">二月 18, 2018</time><h1 class="post__title"><a href="/2018/02/18/区块链开发-Solidity智能合约-类型-固定大小字节数组-动态字节数组/">区块链开发 Solidity智能合约:类型,固定大小字节数组,动态字节数组</a></h1><div class="post__main echo"><blockquote>
<p>与或短路问题</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">    bool public a = true;</span><br><span class="line">    bool public b = !a;</span><br><span class="line"></span><br><span class="line">    function f1() internal constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return !a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function f2() internal view returns (bool) &#123;</span><br><span class="line">      b = !b;</span><br><span class="line">      return b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function isTrue() public view returns (bool) &#123;</span><br><span class="line">      return f1() || f2(); //true</span><br><span class="line">      // 如果前面表达式为true，表达式为true，后面的表达式不会再执行 (短路)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function isTrue2() public view returns (bool) &#123;</span><br><span class="line">      return f1() &amp;&amp; f2();</span><br><span class="line">      // 如果前面表达式为false，就一定false，后面的表达式不会再执行</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225095923.gif" alt=""></p>
<blockquote>
<p>uint, int, address 类型  </p>
</blockquote>
<p>uint  -&gt; uint256 无符号<br>int  -&gt; int256 有符号  </p>
<p>无符号：只能存储大于等于0的数<br>有符号：分正负  </p>
<p>uint8 uint16 uint24 uint32 ….. uint256<br>addresss -&gt; uint160<br>// 0xF055775eBD516e7419ae486C1d50C682d4170645  </p>
<p>int8 int16 int24 int32 int40 … int256  </p>
<p>uint16 0000 0000 0000 0000 ～ 1111 1111 1111 1111    </p>
<p>uint8 0 ~ 255<br>int8 10000000 ~ 0111 1111<br>-128 ～ 127    </p>
<blockquote>
<p> constant 和 view代表只读，不可写</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">    bool public a = true;</span><br><span class="line">    bool public b = !a;</span><br><span class="line"></span><br><span class="line">    function f1() internal constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return a; //true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function setA(bool aa) public &#123;</span><br><span class="line">        a = aa;</span><br><span class="line">    &#125;</span><br><span class="line">    // constant, view代表只读，不可写</span><br><span class="line">    function f2() internal  constant returns(bool)&#123;</span><br><span class="line">      // 如果一个函数里面带了关键字view或者是constant，</span><br><span class="line">      // 那么就不能修改状态变量的值</span><br><span class="line">      // 但凡带了view或者是constant的关键字，区块链就默认只是去向</span><br><span class="line">      // 区块链读取数据，读取数据不需要花gas，但是不花gas，</span><br><span class="line">      // 就不可能修状态变量的值</span><br><span class="line">      // 写入数据或者是修改状态变量的数据都需要花gas，不花gas就不可能写入成功</span><br><span class="line">      b = !b;</span><br><span class="line">      return b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function isTrue() public view returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">      return f1() || f2(); //true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function isTrue2() public view returns (bool) &#123;</span><br><span class="line">      return f1() &amp;&amp; f2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225114752.gif" alt=""></p>
<blockquote>
<p>关系运算符</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">   uint a = 8;</span><br><span class="line">   uint b = 5;</span><br><span class="line"></span><br><span class="line">   function test1() view public returns (bool) &#123;</span><br><span class="line">     return a == b; //false</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test2() view public returns (bool) &#123;</span><br><span class="line">     return a != b; //true</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test3() view public returns (bool) &#123;</span><br><span class="line">     return a &lt; b; //false</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test4() view public returns (bool) &#123;</span><br><span class="line">     return a &lt;= b; //false</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test5() view public returns (bool) &#123;</span><br><span class="line">     return a &gt; b; //true</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test6() view public returns (bool) &#123;</span><br><span class="line">     return a &gt;= b; //true</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>位运算符</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">   uint8 a = 8; //0000 1000</span><br><span class="line">   uint8 b = 5; //0000 0101</span><br><span class="line"></span><br><span class="line">   /* &amp;，|，（^异或），（~非）。 */</span><br><span class="line">   function test1() public view returns (uint8) &#123;</span><br><span class="line">     return a &amp; b; //0000 0000</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test2() public view returns (uint8) &#123;</span><br><span class="line">     return a | b; // 0000 1101  -&gt; 13</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test3() public view returns (uint8) &#123;</span><br><span class="line">     return a ^ b; // 0000 1101 -&gt; 13</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test4() public view returns (uint8) &#123;</span><br><span class="line">     return ~a; //1111 0111</span><br><span class="line">     // 0000 1000</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>算术运算符 和 移位</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">   uint8 a = 8; //0000 1000</span><br><span class="line">   uint8 b = 5; //0000 0101</span><br><span class="line"></span><br><span class="line">   function test1() public view returns (uint8) &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test2() public view returns (uint8) &#123;</span><br><span class="line">    return a - b;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test3() public view returns (uint8) &#123;</span><br><span class="line">    return a * b;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test4() public view returns (uint8) &#123;</span><br><span class="line">    return a / b; // 1</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test5() public view returns (uint8) &#123;</span><br><span class="line">    return a % b; //3</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test6() public view returns (uint8) &#123;</span><br><span class="line">    return a ** 2; //8的5次方</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test7() public view returns (uint8) &#123;</span><br><span class="line">    return a &gt;&gt; 2; //2 a右移两位，代表a除以2的2次方</span><br><span class="line">    // 0000 1000</span><br><span class="line">    // 0000 0010</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function test8() public view returns (uint8) &#123;</span><br><span class="line">    return a &lt;&lt; 3; //8*2^3</span><br><span class="line">    // 0000 1000</span><br><span class="line">    // 0100 0000</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>两个相等 的 超大数 相减,会自动检测抵消,不会溢出.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.4;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line"></span><br><span class="line">  function test1() public view returns (uint8) &#123;</span><br><span class="line">    uint8 b = 8**1000 - 8**1000 + 6;</span><br><span class="line">    return b;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225120605.gif" alt=""></p>
<h2 id="固定大小字节数组"><a href="#固定大小字节数组" class="headerlink" title="固定大小字节数组"></a>固定大小字节数组</h2><blockquote>
<p>固定大小字节数组<br> byte  一个字节<br> byte 等价于 bytes1 一个字节<br> bytes1 bytes2 bytes3 bytes4 bytes5   bytes6…bytes32<br> address 20 160<br> 一个byte 8位<br> liyuechun<br>这个字符串 十六进制为: 0x6c697975656368756e</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">  bytes1 public a = 0x6c;</span><br><span class="line">  bytes2 public b = 0x6c69;</span><br><span class="line">  bytes3 public c = 0x6c6979;</span><br><span class="line"></span><br><span class="line">  // ......</span><br><span class="line"></span><br><span class="line">  bytes9 public d = 0x6c697975656368756e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>案例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line"></span><br><span class="line">    function test() public pure returns (bytes9) &#123;</span><br><span class="line">      return &quot;liyuechun&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E5%9B%BA%E6%80%81%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%841.png" alt=""></p>
<blockquote>
<p><strong>注意</strong> string 类型 <strong>不支持</strong> 索引 和 length方法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">    string a = &quot;liyuechun&quot;;</span><br><span class="line">    bytes1 b = a[0]; //报错，不支持索引访问</span><br><span class="line">    function test() public pure returns (uint) &#123;</span><br><span class="line">      return a.length; //报错，没有length方法</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E5%9B%BA%E6%80%81%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%842%E6%8A%A5%E9%94%99.png" alt=""></p>
<blockquote>
<p>固定大小字节数组 如何调用length</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    function test_Length() public pure returns (uint) &#123;</span><br><span class="line">      return bytes10(&quot;liyuechun&quot;).length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test() public pure returns (bytes10) &#123;</span><br><span class="line">      return bytes10(&quot;liyuechun&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225190709.gif" alt=""></p>
<blockquote>
<p>一个英文字母或者一个数字代表一个字节<br>固定大小字节数组的 内容 装到 较大的固定大小字节数组 末尾自动添<code>0</code><br>固定大小字节数组的 内容 装到 较小的固定大小字节数组 自动截断</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">  // liyuechun</span><br><span class="line">  // 一个英文字母或者一个数字代表一个字节</span><br><span class="line"></span><br><span class="line">  bytes9 public d = 0x6c697975656368756e; //9</span><br><span class="line"></span><br><span class="line"> //0x6c697975656368756e0000000000000000000000</span><br><span class="line">  function upTransfer() public view returns (bytes20) &#123; // 20</span><br><span class="line">    return bytes20(d);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> // 0x6c69</span><br><span class="line">  function downTransfer() public view returns (bytes2) &#123; // 2</span><br><span class="line">    return bytes2(d);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E5%9B%BA%E5%AE%9A%E5%A4%A7%E5%B0%8F%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%843.png" alt=""></p>
<blockquote>
<p>固定大小字节数组有两个不可变：</p>
<ol>
<li>长度不可变 ，name.length = 30,报错</li>
<li>内容不可变，name[2] = 0x89报错</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">  // liyuechun</span><br><span class="line">  // 一个英文字母或者一个数字代表一个字节</span><br><span class="line"></span><br><span class="line">  bytes9 public name = 0x6c697975656368756e; //9</span><br><span class="line">  // &quot;liyuechun&quot;</span><br><span class="line">  function test1() public view returns (uint) &#123;</span><br><span class="line">    return name.length; // 固定大小字节数组可以通过length返回其长度</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function test2() public view returns (byte) &#123;</span><br><span class="line">    return name[2]; //固定大小字节数组 可以索引访问</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    // 89</span><br><span class="line">    //固定大小字节数组</span><br><span class="line">  function setByte2(byte b) public &#123;</span><br><span class="line">      name[2] = b; //会报错,固定大小字节数组 内容不可修改</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E5%9B%BA%E5%AE%9A%E5%A4%A7%E5%B0%8F%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%844.png" alt=""></p>
<blockquote>
<p>固定大小字节数组 关系运算</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C&#123;</span><br><span class="line"></span><br><span class="line">    // 0x 6c 69 79 75 65 63 68 75 6e  -&gt; liyuechun</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 1 2 3 4 5 6 7 8 9 A B C D E F</span><br><span class="line"></span><br><span class="line">    bytes1 b10 = 0x6c; // l -&gt; 0110 1100  -&gt; 12 * 1 + 6 * 16  = 108</span><br><span class="line">    bytes1 b11 = 0x69; // i -&gt; 0110 1001  -&gt; 9 * 1 + 6 * 16 = 105</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // &lt;=, &lt;, ==, !=, &gt;=, &gt;</span><br><span class="line"></span><br><span class="line">    function test1() constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &lt;= b11; // false</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    function test2() constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &lt; b11; // false</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test3() constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 == b11; // false</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test4() constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &gt;= b11; // true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test5() constant returns (bool) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &gt; b11; // true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>固定大小字节数组 位运算</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C&#123;</span><br><span class="line"></span><br><span class="line">    // 0x 6c 69 79 75 65 63 68 75 6e  -&gt; liyuechun</span><br><span class="line"></span><br><span class="line">    // 1 2 3 4 5 6 7 8 9 A B C D E F</span><br><span class="line"></span><br><span class="line">    bytes1 b10 = 0x6c; // l -&gt; 0110 1100  -&gt; 12 * 1 + 6 * 16  = 108</span><br><span class="line">    bytes1 b11 = 0x69; // i -&gt; 0110 1001  -&gt; 9 * 1 + 6 * 16 = 105</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //   &amp;, |, ^(异或), ~ (取反), &lt;&lt; (左移), &gt;&gt; (右移)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    function test1() constant returns (bytes1) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &amp; b11;</span><br><span class="line">        // 0110 1100 -&gt; 0x6c</span><br><span class="line">        // 0110 1001 -&gt; 0x69</span><br><span class="line">        // 0110 1000 -&gt; 0x68</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test2() constant returns (bytes1) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 | b11;</span><br><span class="line">        // 0110 1100 -&gt; 0x6c</span><br><span class="line">        // 0110 1001 -&gt; 0x69</span><br><span class="line">        // 0111 1101 -&gt; 0x6d</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test3() constant returns (bytes1) &#123;</span><br><span class="line"></span><br><span class="line">        return ~b10;</span><br><span class="line">        // 0110 1100 -&gt; 0x6c</span><br><span class="line">        // 1001 0011 -&gt; 0x93</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function test4() constant returns (bytes1) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &lt;&lt; 1;</span><br><span class="line">        // 0110 1100 -&gt; 0x6c</span><br><span class="line">        // 1101 1000 -&gt; 0xd8</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     function test5() constant returns (bytes1) &#123;</span><br><span class="line"></span><br><span class="line">        return b10 &gt;&gt; 1;</span><br><span class="line">        // 0110 1100 -&gt; 0x6c</span><br><span class="line">        // 0011 0110 -&gt; 0x36</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="可变大小字节数组-bytes"><a href="#可变大小字节数组-bytes" class="headerlink" title="可变大小字节数组 bytes"></a>可变大小字节数组 bytes</h2><blockquote>
<p>bytes 可变大小字节数组<br> string可以直接转换为bytes，通过bytes 的length方法可以获取到字节长度  </p>
<p>小练习：写一个方法，这个方法有一个字符串参数，通过这个函数返回传入进去的字符串长度</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line"></span><br><span class="line">    // 小练习：写一个方法，这个方法有一个字符串参数，通过这个函数返回传入进去的字符串长度</span><br><span class="line"></span><br><span class="line">   string name = &quot;liyuechun13331184066&quot;;</span><br><span class="line">   // 0x6c697975656368756e</span><br><span class="line">   function test1() public view returns (bytes) &#123;</span><br><span class="line">     return bytes(name);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   function nameLength() public view returns (uint) &#123;</span><br><span class="line">     return bytes(name).length;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E5%8F%AF%E5%8F%98%E5%A4%A7%E5%B0%8F%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%841.png" alt=""></p>
<blockquote>
<p>小练习：写一个方法，这个方法有一个字符串参数，通过这个函数返回传入进去的字符串长度</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">  </span><br><span class="line">    function length(string a) public pure returns (uint) &#123;</span><br><span class="line">      return bytes(a).length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225193109.gif" alt=""></p>
<blockquote>
<p><strong>注意</strong> : 一个汉字 是3个字节</p>
</blockquote>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E5%8F%AF%E5%8F%98%E5%A4%A7%E5%B0%8F%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%842.png" alt=""></p>
<blockquote>
<p>可变大小字节数组 内容可修改</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">  string public a = &quot;liyuechun&quot;;</span><br><span class="line">  //可变字节数组内容可修改</span><br><span class="line">  function setAy(byte b) public &#123;</span><br><span class="line">    bytes(a)[2] = b;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225193747.gif" alt=""></p>
<blockquote>
<p>固定大小字节数组：<br>1.长度不可变<br>2.内容不可变  </p>
<p>可变大小字节数组：<br>1.长度可变<br>2.内容可变  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line"></span><br><span class="line">    // 创建一个长度为1的可变字节数组</span><br><span class="line">    bytes public name = new bytes(1); //0x00</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    function setNameLength(uint length) public &#123;</span><br><span class="line"></span><br><span class="line">        name.length = length; //修改长度</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function nameLength() constant public returns (uint) &#123;</span><br><span class="line"></span><br><span class="line">        return name.length; //返回长度</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225194137.gif" alt=""></p>
<blockquote>
<p>可变大小字节数组 的 新增字节 和 清空</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line"></span><br><span class="line">    // 创建一个长度为1的可变字节数组</span><br><span class="line">    bytes public name = new bytes(1); //0x00</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    function setNameLength(uint length) public &#123;</span><br><span class="line">        // 如果length等于0，那么相当于清空整个数组内容</span><br><span class="line">        name.length = length; //修改长度</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //清空整个字节数组的内容</span><br><span class="line">    function deleteBytes() public &#123;</span><br><span class="line">      delete name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function nameLength() constant public returns (uint) &#123;</span><br><span class="line"></span><br><span class="line">        return name.length; //返回长度</span><br><span class="line">    &#125;</span><br><span class="line">    //通过索引修改内容</span><br><span class="line">    function setIndex0(byte b) public &#123;</span><br><span class="line">      name[0] = b;</span><br><span class="line">    &#125;</span><br><span class="line">    //可否通过push新增一个字节</span><br><span class="line">    function pushToOneByte(byte b) public &#123;</span><br><span class="line">      name.push(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://p37d7w3w4.bkt.clouddn.com/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180225195223.gif" alt=""></p>
<hr>
<blockquote>
<p><strong><em>日后随着 学习打怪的不断深入，会解锁其他的高级教程。</em></strong>  </p>
<h3 id="期待-吗？-那就关注下面-公众号-随时锁定区块链开发学习教程进度-："><a href="#期待-吗？-那就关注下面-公众号-随时锁定区块链开发学习教程进度-：" class="headerlink" title="期待 吗？ 那就关注下面 公众号 随时锁定区块链开发学习教程进度 ：)"></a><strong><em>期待 吗？ 那就关注下面 公众号 随时锁定区块链开发学习教程进度 ：)</em></strong></h3></blockquote>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Solidity/">Solidity</a></li></ul></footer></article><section class="reward"><a class="btn-reward" href="#">关注公众号</a><div class="reward-wrapper clearfix"><img src="/img/wechat.jpg" title="公众号：区块链开发技术共享"><img src="/img/lianhu.jpg" title="公众号：区块链部落"></div></section><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zMzU4MC8xMDEzNQ=="><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2018 Fuyao-Jiang</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>